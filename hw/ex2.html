<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>

    <div id="members"></div>

  </body>


  <script>
    const data = {
      1: {
        name: "Pham Thanh Dat",
        birthdate: new Date('2004-17-09'),
        ban: "giao duc",
      },
      2: {
        name: "Hoang Thi Hanh",
        birthdate: new Date('2005-01-01'),
        ban: "truyen thong",
      },
      3: {
        name: "Trinh Phu Thai",
        birthdate: new Date('2005-01-01'),
        ban: "truyen thong + giao duc",
      },
      4: {
        name: "Nguyen Tuan Dat",
        birthdate: new Date('2004-01-01'),
        ban: "giao duc",
        "chuc vu": "chu nhiem",
      },
      5:{
        name: "Le Van Toan",
        birthdate: new Date('2004-01-01'),
        ban: "truyen thong",
        "chuc vu": NaN,
      }
    };

    console.log(data);

    // Hàm này lấy input là data như trên và thực hiện thêm một thẻ div có id là egg-{id} và class container vào body của DOM
    // Thể div egg-{1} chỉ chứa name của một thành viên (trong the h1 class egg-name) và một nút reveal (the button class egg-btn)
    // Khi ấn nút reveal thì text của nút reveal chuyển thành hide và hiển thị các thông tin khác của member
    // Khi ấn nút hide thì quay lại trạng thái ban đầu
    // Nếu không có "chuc vu" thì trả ra "thanh vien"
    // Age tính toán theo bỉthdate
    // Mở file html này ra nhìn 2 thẻ div bên trên để hiểu nha!!!

    // Có thể tách ra nhiều hàm con
    // Submit tất cả code trong 1 file .html

    function calculateAge(birthdate) {
      const diff = Date.now() - birthdate.getTime();
      const ageDate = new Date(diff);
      return Math.abs(ageDate.getUTCFullYear() - 1970);
    }

    function createMemberCard(id, member) {
      const container = document.createElement('div');
      container.className = 'container not-reveal';
      container.id = `egg-${id}`;

      container.innerHTML = `
        <h1 class="egg-name">${member.name}</h1>
        <button class="egg-btn">Reveal</button>
        <div class="egg-inf reveal">
          <p class="egg-age">Age: ${calculateAge(member.birthdate)}</p>
          <p class="egg-ban">Ban: ${member.ban}</p>
          <p class="egg-role">Chuc vu: ${member["chuc vu"] || "thanh vien"}</p>
        </div>
      `;

      const button = container.querySelector('.egg-btn');
      const infoDiv = container.querySelector('.egg-inf');

      button.addEventListener('click', () => {
        if (infoDiv.style.display === 'none' || infoDiv.style.display === '') {
          infoDiv.style.display = 'block';
          button.textContent = 'Hide';
        } else {
          infoDiv.style.display = 'none';
          button.textContent = 'Reveal';
        }
      });

      return container;
    }

    function addMemberCards(data) {
      const membersDiv = document.getElementById('members');
      for (const id in data) {
          const memberCard = createMemberCard(id, data[id]);
          membersDiv.appendChild(memberCard);
      }
    }

    addMemberCards(data);
  </script>
</html>
